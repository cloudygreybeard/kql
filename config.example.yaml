# kql configuration file
# Copy to ~/.kql/config.yaml and customize

ai:
  # Default AI provider: ollama, instructlab, vertex, azure
  provider: ollama

  # Default model name (provider-specific)
  model: llama3.2

  # Temperature controls randomness (0.0 = deterministic, 1.0 = creative)
  temperature: 0.2

  # Ollama configuration (local LLM inference)
  ollama:
    endpoint: http://localhost:11434

  # InstructLab configuration (fine-tuned local models)
  instructlab:
    endpoint: http://localhost:8000

  # Google Vertex AI configuration
  # Supports Gemini and Claude models via Model Garden
  vertex:
    project: ""         # GCP project ID (or set KQL_GCP_PROJECT / GOOGLE_CLOUD_PROJECT)
    location: us-east5  # us-east5 is required for Claude; us-central1 works for Gemini

  # Example for Claude on Vertex AI:
  # provider: vertex
  # model: claude-opus-4-5
  # vertex:
  #   project: my-gcp-project
  #   location: us-east5

  # Azure OpenAI configuration
  azure:
    endpoint: ""     # Azure OpenAI endpoint URL (or set AZURE_OPENAI_ENDPOINT)
    deployment: ""   # Deployment name (or set AZURE_OPENAI_DEPLOYMENT)
    # api_key: ""    # API key (or set AZURE_OPENAI_API_KEY) - prefer env var

  # Validation settings for generate and fix commands
  validation:
    enabled: true              # Enable validation of AI-generated KQL (default: true)
    strict: false              # Fail with exit code 1 if validation fails (default: false)
    retries: 2                 # Number of retry attempts on failure (default: 2)

    # Feedback strategies for retry prompts
    feedback:
      errors: true             # Include error messages (default: true)
      hints: true              # Add contextual hints for error types (default: true)
      examples: true           # Include syntax examples (default: true)
      progressive: true        # Increase detail on each retry (default: true)

    # Temperature adjustment on retries
    temperature:
      adjust: true             # Enable temperature increase on retry (default: true)
      increment: 0.1           # Increase per retry (default: 0.1)
      max: 0.8                 # Cap temperature (default: 0.8)
